<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <div class="ui-g">
        <div class="ui-g-12">
            <div class="ui-g-6">
                <p:selectBooleanCheckbox id="takeCompetences" value="#{tF_StepTwoController.takeCompetences}">
                    <f:ajax render="@form"/>
                </p:selectBooleanCheckbox>
                <p:outputLabel for="takeCompetences" value="#{bundle.teamCompetencesOption}"/>
            </div>
            <div class="ui-g-1">
                <p:outputLabel for="competenceWeight" value="#{bundle.projectWeight}"/>
            </div>
            <div class="ui-g-3">
                <p:spinner id="competenceWeight" value="#{tF_StepTwoController.competenceWeight}" min="0"
                           max="#{tF_StepTwoController.higherCompetenceWeight()}" stepFactor="0.01"
                           disabled="#{!tF_StepTwoController.takeCompetences}">
                    <p:ajax event="change" process="competenceWeight"
                            update="competenceWeight,#{p:component('competenceWeightLabel')}"/>
                </p:spinner>
            </div>
        </div>
        <br/>
        <br/>
        <br/>
        <br/>
        <div class="ui-g-3">

            <div class="ui-g-2">
                <p:selectBooleanCheckbox id="takeReq" value="#{tF_StepTwoController.takeProjectRequirements}">
                    <p:ajax update="project,project,#{p:component('takeCompetences')},#{p:component('competenceWeight')}"/>
                </p:selectBooleanCheckbox>
            </div>
            <div class="ui-g-10">
                <p:outputLabel for="takeReq"
                               value="#{bundle.competences_by_project}"
                               style="text-align: right"/>
            </div>
            <br/>
        </div>
        <div class="ui-g-9">
            <p:fieldset>
                <h:outputText value="#{bundle.projectBossRequisite} #{bundle.project_managet}"/>
                <br/>
                <div class="ui-g-12">
                    <div class="ui-g-3"><h:outputText value=" #{bundle.projectSelector}"/></div>
                    <div class="ui-g-9">
                        <p:selectOneMenu disabled="#{!tF_StepTwoController.takeProjectRequirements}" effect="clip"
                                         id="project" value="#{tF_StepTwoController.selectedProject}" filter="true"
                                         filterMatchMode="contains" converter="EntityConverter">
                            <f:selectItem itemLabel="#{bundle.selectOnePlaceHolder}"/>
                            <f:selectItems value="#{tF_StepTwoController.parametersBoss.projects}"
                                           var="projects"
                                           itemValue="#{projects}"
                                           itemLabel="#{projects.project.projectName}"/>
                            <p:ajax event="change" listener="#{tF_StepTwoController.prepareProjectInCellEdit()}"
                                    update="#{p:component('tecCompTable')},#{p:component('genCompTable')}"/>
                        </p:selectOneMenu>
                    </div>
                </div>

                <br/>
                <div class="ui-g-12">
                    <h:panelGroup id="basic" style="margin-bottom:20px">
                        <h:panelGroup id="competencesContent">
                            <p:dataTable id="tecCompTable"
                                         var="techComp"
                                         value="#{tF_StepTwoController.techCompetences}"
                                         rows="5" paginator="true"
                                         class="z-depth-1"
                                         editable="true"
                                         editMode="cell"
                                         paginatorPosition="bottom">
                                <f:facet name="header">
                                    #{bundle.projectTechnicalCompTH}
                                </f:facet>

                                <p:column headerText="#{bundle.projectCompNameCTH}">
                                    <h:outputText value="#{techComp.competence.competitionName}"/>
                                </p:column>

                                <p:column headerText="#{bundle.projectCompLvlCH}">
                                    <p:cellEditor>
                                        <f:facet name="output"><h:outputText value="#{techComp.minLevel.significance}"/></f:facet>
                                        <f:facet name="input">
                                            <p:selectOneMenu effect="clip" id="genCompMin" value="#{techComp.minLevel}"
                                                             filter="true" filterMatchMode="contains"
                                                             converter="EntityConverter">
                                                <f:selectItems value="#{levelsController.itemsAvailableSelectMany}"
                                                               var="minLevel"
                                                               itemValue="#{minLevel}"
                                                               itemLabel="#{minLevel.significance}"/>
                                            </p:selectOneMenu>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>

                                <p:column headerText="#{bundle.projectCompImportanceCH}">
                                    <p:cellEditor>
                                        <f:facet name="output"><h:outputText
                                                value="#{techComp.competenceImportance.significance}"/></f:facet>
                                        <f:facet name="input">
                                            <p:selectOneMenu effect="clip" id="compImp"
                                                             value="#{techComp.competenceImportance}" filter="true"
                                                             filterMatchMode="contains" converter="EntityConverter">
                                                <f:selectItems
                                                        value="#{competenceImportanceController.itemsAvailableSelectMany}"
                                                        var="competenceImp"
                                                        itemValue="#{competenceImp}"
                                                        itemLabel="#{competenceImp.significance}"/>
                                            </p:selectOneMenu>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>


                            </p:dataTable>


                            <p:dataTable id="genCompTable"
                                         var="genComp"
                                         value="#{tF_StepTwoController.genCompetences}"
                                         rows="5"
                                         paginator="true"
                                         class="z-depth-1"
                                         editable="true"
                                         editMode="cell"
                                         paginatorPosition="bottom">

                                <f:facet name="header">
                                    #{bundle.projectGenericCompTH}
                                </f:facet>

                                <p:column headerText="#{bundle.projectCompNameCTH}">
                                    <h:outputText value="#{genComp.competence.competitionName}"/>
                                </p:column>

                                <p:column headerText="#{bundle.projectCompLvlCH}">
                                    <p:cellEditor>
                                        <f:facet name="output"><h:outputText value="#{genComp.minLevel.significance}"/></f:facet>
                                        <f:facet name="input">
                                            <p:selectOneMenu effect="clip" id="genCompMin2" value="#{genComp.minLevel}"
                                                             filter="true" filterMatchMode="contains"
                                                             converter="EntityConverter">
                                                <f:selectItems value="#{levelsController.itemsAvailableSelectMany}"
                                                               var="minLevel"
                                                               itemValue="#{minLevel}"
                                                               itemLabel="#{minLevel.significance}"/>
                                            </p:selectOneMenu>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>

                                <p:column headerText="#{bundle.projectCompImportanceCH}">
                                    <p:cellEditor>
                                        <f:facet name="output">
                                            <h:outputText value="#{genComp.competenceImportance.significance}"/>
                                        </f:facet>
                                        <f:facet name="input">
                                            <p:selectOneMenu effect="clip" id="techCompImp"
                                                             value="#{genComp.competenceImportance}" filter="true"
                                                             filterMatchMode="contains" converter="EntityConverter">
                                                <f:selectItems
                                                        value="#{competenceImportanceController.itemsAvailableSelectMany}"
                                                        var="competenceImp"
                                                        itemValue="#{competenceImp}"
                                                        itemLabel="#{competenceImp.significance}"/>
                                            </p:selectOneMenu>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>
                            </p:dataTable>
                        </h:panelGroup>
                    </h:panelGroup>
                </div>

            </p:fieldset>
        </div>
    </div>
</ui:composition>
